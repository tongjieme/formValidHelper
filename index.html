<!DOCTYPE html>
<html ng-app="app">
<head>
	<meta charset="utf-8">
	<title></title>
	<meta http-equiv="x-ua-compatible" content="IE=10">

	<link href="css/style.css" rel="stylesheet">
	<!--[if lt IE 9]>
	<script src="js/html5shiv.js"></script>
	<![endif]-->

</head>
<body>

<div class="paper">
	<section class="boxed">
		<div class="inner">
		<section class="section-header center">
			<h1 class="title">Form Validation <span class="title-highlight">Helper</span></h1>
		</section>
		<div class="two-third">
			<h2>Quick Usage</h2>
			<section>
				<pre data-type="JavaScript"><code>
var element = $('&lt;input type=text data-valid=required /&gt;');
form.test(element);
// return: Object {isPassed: false, type: "required"}
				</code></pre>	
			</section>

			<section>
				<pre data-type="html"><code>
&lt;input type="text" data-valid="required regex" data-regex="email" id="email"&gt;
&lt;script src="jquery.js"&gt;&lt;/script&gt;
&lt;script src="formValidHelper.js"&gt;&lt;/script&gt;
&lt;script&gt;
form.test($('#email'));
// return: Object {isPassed: false, type: "required"}
// or Object {isPassed: false, type: "regex"}
&lt;/script&gt;
				</code></pre>	
			</section>
			<textarea codex="html" content="content">
&lt;input type="text" data-valid="required regex" data-regex="email" id="email"&gt;
&lt;script src="jquery.js"&gt;&lt;/script&gt;
&lt;script src="formValidHelper.js"&gt;&lt;/script&gt;
&lt;script&gt;
form.test($('#email'));
// return: Object {isPassed: false, type: "required"}
// or Object {isPassed: false, type: "regex"}
&lt;/script&gt;
			</textarea>
			<a href="https://github.com/tongjieme/formValidHelper/archive/gh-pages.zip" class="pureBtn big red">Download ZIP</a>
		</div>
		
		<div class="one-third last article">
			<h2>options</h2>
			<ul>
				<li><b>data-valid</b>
					<ol>
						<li>required</li>
						<li>regex</li>
						<li>minLengh</li>
						<li>maxLength</li>
						<li>equal</li>
					</ol>
				</li>
				<li><b>data-default</b></li>
				<li><b>data-regex</b>
					<ol>
						<li>email</li>
						<li>chinese</li>
						<li>zipcode</li>
						<li>mobile</li>
						<li>phone</li>
						<li>numbers</li>
						<li>numbers_dot</li>
						<li>abc</li>
						<li>numbers_abc_underline</li>
						<li>url</li>
					</ol>
				</li>
				<li><b>data-min-length, data-max-length</b>
					<ol>
						<li>1,2,3...</li>
					</ol>
				</li>
				<li><b>data-equal</b>
					<ol>
						<li>css selector: '#email', '.another'</li>
					</ol>
				</li>
			</ul>
		</div>

		</div> <!-- end inner -->
	</section>

	<section class="boxed">
		<div class="inner">
		<section class="section-header left">
			<h3 class="title">Real world usage <span class="title-highlight">example</span></h3>
		</section>
		<form action="#" class="column-wrap" id="realExample">
			<section class="one-third">
				<input type="text" id="username" data-valid="required noChinese ajaxUsernameExist2 ajaxUsernameExist" placeholder="Username">
				<p class="help">Not passed</p>
			</section>
			<section class="one-third">
				<input type="text" data-valid="required url ajaxUsernameExist2 ajaxUsernameExist" placeholder="url">
			</section>
			<section class="one-third">
				<input type="password" data-valid="required ajax" name="password" placeholder="Password">
				<p class="help">Not passed</p>
			</section>
			<section class="one-third">
				<input type="password" data-valid="required equal_password" name="password2" placeholder="Password">
				<p class="help">Not passed</p>
			</section>
			<section class="one-third last">
				<input type="text" id="email" data-valid="required email" placeholder="Email" name="email">
				<p class="help">Not passed</p>
				<p class="help-regex">regex error</p>
			</section>
			<section>
				<textarea data-valid="required minLength" data-min-length="10"></textarea>
				<p class="help">Not passed</p>
				<p class="help-minLength">minLenght error</p>
			</section>
			<section>
				<input type="checkbox" data-valid="required" />
			</section>
			<section>
				<input type="submit" class="pureBtn big red">
			</section>
		</form>
		<form action="#" id="submitValid">
            <section class="one-third">
                <input type="text" data-valid="required email" placeholder="Email:"><br>    
            </section>
		    
            <section class="one-third">
                <input type="password" data-valid="required minLength_10 maxLength_15" placeholder="Password:">    
            </section>
            
            <section class="one-third">
                <input type="submit" class="pureBtn big red">    
            </section>
            
            <textarea ng-model="content"></textarea>
        </form>
		</div>
	</section>
	
</div> <!-- end paper -->
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/pretify/prettify.js"></script>



<script src="js/tooltipster/jquery.tooltipster.js"></script>
<link href="js/tooltipster/tooltipster.css" rel="stylesheet">
<script src="js/formValidHelper.js"></script>

<script src="js/highlight/highlight.pack.js"></script>
<link href="js/highlight/styles/monokai_sublime.css" rel="stylesheet">
<script src="js/ng/angular-min.js"></script>
<script src="js/ng/app.js"></script>

<script>
formValid.submitValid($('#submitValid'));
prettyPrint();
    
form.isAbc = function($el){
	console.log(arguments);
	return {
			isPassed: false,
			type: 'abc',
			msg: 'abc'
		};
}
form.isAjax = function($el){
	tooltips.error($el, 'validting');

	var defered = $.Deferred();
	setTimeout(function() {
		defered.resolve({
			isPassed: true,
			type: 'ajax'
		});
	}, 3000);

	return {
				isPassed: false,
				isDeferred: true,
				deferred: defered.promise(),
				func: function(abc){
					tooltips.error($el, abc);
				}
			};
}
// form.msg.abc = '* abc';

// simple real world example
$('#realExample').on('submit', function(e){
	var result = formValid.tests($(this).find('[data-valid]'));
	if(!result.isPassed) {
		e.preventDefault();
	}
});
formValid.showOneMessage = true;
formValid.autoPositionUpdate = true;
formValid.blurValid($('#realExample'));

$('input, textarea').on('focus', function(){
	$(this).siblings('[class^=help]').hide();
});


var isAjaxUsernameExist = function($el){
	var deferred = this.Deferred();

	setTimeout(function(){
		deferred.resolve({
			isPassed: true,
			type: 'ajaxUsernameExist',
			msg: '用户名可用'
		});
		// deferred.reject({
		// 	isPassed: false,
		// 	type: 'ajaxUsernameExist',
		// 	msg: '用户名可用'
		// });
	}, 2000);

	return deferred.promise();
};


var isAjaxUsernameExist2 = function($el){
	var deferred = this.Deferred();

	setTimeout(function(){
		deferred.resolve({
			isPassed: false,
			type: 'ajaxUsernameExist2',
			msg: '用户名不可用'
		});
		// deferred.reject({
		// 	isPassed: false,
		// 	type: 'ajaxUsernameExist2',
		// 	msg: '用户名不可用'
		// });
	}, 2000);

	return deferred.promise();
};

form.isAjaxUsernameExist = isAjaxUsernameExist;
form.isAjaxUsernameExist2 = isAjaxUsernameExist2;
</script>
</body>
</html>
